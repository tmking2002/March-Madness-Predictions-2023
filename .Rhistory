filter(Var1 != Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
# Remove duplicates (team1 and team2 switched)
mens_matchups <- mens_matchups[!duplicated(t(apply(mens_matchups, 1, sort))), ]
mens_team_data <- mens_matchups %>%
merge(mens_ranking_data, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(Rank1 = OrdinalRank,
Conf1 = ConfAbbrev) %>%
merge(mens_ranking_data, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(Rank2 = OrdinalRank,
Conf2 = ConfAbbrev) %>%
merge(mens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
rank_diff = Rank1 - Rank2)
mens_team_data$predicted_point_diff <- predict(rank_model, mens_team_data, type = "response")
mens_team_data$pred <- pnorm(mens_team_data$predicted_point_diff, 0, point_sd)
mens_submission <- mens_team_data %>%
mutate(ID = paste0(season,"-",Team1,"-",Team2)) %>%
select(ID, pred)
## WOMENS
womens_teams_1 <- files$WRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, LTeamID) %>%
rename(TeamID = LTeamID)
womens_teams_2 <- files$WRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, WTeamID) %>%
rename(TeamID = WTeamID)
womens_teams <- merge(womens_teams_1, womens_teams_2, all = T)
womens_matchups <- data.frame()
for(i in unique(womens_teams$Season)){
curr_matchups <- expand.grid(womens_teams %>% filter(Season == i) %>% pull(TeamID),
womens_teams %>% filter(Season == i) %>% pull(TeamID))
womens_matchups <- rbind(womens_matchups, curr_matchups %>% mutate(season = i))
}
womens_matchups <- womens_matchups %>%
filter(Var1 != Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
# Remove duplicates (team1 and team2 switched)
womens_matchups <- womens_matchups[!duplicated(t(apply(womens_matchups, 1, sort))), ]
womens_team_data <- womens_matchups %>%
merge(womens_stats, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(win_perc_1 = win_perc,
margin_1 = avg_margin,
Conf1 = ConfAbbrev) %>%
merge(womens_stats, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(win_perc_2 = win_perc,
margin_2 = avg_margin,
Conf2 = ConfAbbrev) %>%
merge(womens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
win_perc_diff = win_perc_1 - win_perc_2,
margin_diff = margin_1 - margin_2)
womens_team_data$predicted_point_diff <- predict(womens_model, womens_team_data, type = "response")
womens_team_data$pred <- pnorm(womens_team_data$predicted_point_diff, 0, womens_point_sd)
womens_submission <- womens_team_data %>%
mutate(ID = paste0(season,"-",Team1,"-",Team2)) %>%
select(ID, pred)
submission <- rbind(womens_submission, mens_submission)
mens_teams
womens_teams %>% filter(Season == 2017)
choose(349,2)
womens_teams %>% group_by(Season)
womens_teams %>% group_by(Season) %>% summarise(teams = n())
womens_teams %>% group_by(Season) %>% summarise(teams = n()) %>% pull(teams)
teams <- womens_teams %>% group_by(Season) %>% summarise(teams = n()) %>% pull(teams)
choose(teams, 2)
choose(teams, 2) %>% sum
womens_teams_total <- womens_teams %>% group_by(Season) %>% summarise(teams = n()) %>% pull(teams)
mens_teams_total <- mens_teams %>% group_by(Season) %>% summarise(teams = n()) %>% pull(teams)
sum(c(choose(womens_teams_total,2),choose(mens_teams_total,2)))
source("EDA.R")
mens_teams_1 <- files$MRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, LTeamID) %>%
rename(TeamID = LTeamID)
mens_teams_2 <- files$MRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, WTeamID) %>%
rename(TeamID = WTeamID)
mens_teams <- merge(mens_teams_1, mens_teams_2, all = T)
mens_teams_1 <- files$MRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, LTeamID) %>%
rename(TeamID = LTeamID)
mens_teams_2 <- files$MRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, WTeamID) %>%
rename(TeamID = WTeamID)
mens_teams <- merge(mens_teams_1, mens_teams_2, all = T)
mens_matchups <- data.frame()
for(i in unique(mens_teams$Season)){
curr_matchups <- expand.grid(mens_teams %>% filter(Season == i) %>% pull(TeamID),
mens_teams %>% filter(Season == i) %>% pull(TeamID))
mens_matchups <- rbind(mens_matchups, curr_matchups %>% mutate(season = i))
}
mens_matchups <- mens_matchups %>%
filter(Var1 > Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
mens_team_data <- mens_matchups %>%
merge(mens_ranking_data, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(Rank1 = OrdinalRank,
Conf1 = ConfAbbrev) %>%
merge(mens_ranking_data, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(Rank2 = OrdinalRank,
Conf2 = ConfAbbrev) %>%
merge(mens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
rank_diff = Rank1 - Rank2)
mens_team_data$predicted_point_diff <- predict(rank_model, mens_team_data, type = "response")
mens_team_data$pred <- pnorm(mens_team_data$predicted_point_diff, 0, point_sd)
mens_submission <- mens_team_data %>%
mutate(ID = paste0(season,"-",Team1,"-",Team2)) %>%
select(ID, pred)
womens_teams_1 <- files$WRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, LTeamID) %>%
rename(TeamID = LTeamID)
womens_teams_2 <- files$WRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, WTeamID) %>%
rename(TeamID = WTeamID)
womens_teams <- merge(womens_teams_1, womens_teams_2, all = T)
womens_matchups <- data.frame()
for(i in unique(womens_teams$Season)){
curr_matchups <- expand.grid(womens_teams %>% filter(Season == i) %>% pull(TeamID),
womens_teams %>% filter(Season == i) %>% pull(TeamID))
womens_matchups <- rbind(womens_matchups, curr_matchups %>% mutate(season = i))
}
womens_matchups <- womens_matchups %>%
filter(Var1 > Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
womens_team_data <- womens_matchups %>%
merge(womens_stats, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(win_perc_1 = win_perc,
margin_1 = avg_margin,
Conf1 = ConfAbbrev) %>%
merge(womens_stats, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(win_perc_2 = win_perc,
margin_2 = avg_margin,
Conf2 = ConfAbbrev) %>%
merge(womens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
win_perc_diff = win_perc_1 - win_perc_2,
margin_diff = margin_1 - margin_2)
womens_team_data$predicted_point_diff <- predict(womens_model, womens_team_data, type = "response")
womens_team_data$pred <- pnorm(womens_team_data$predicted_point_diff, 0, womens_point_sd)
womens_submission <- womens_team_data %>%
mutate(ID = paste0(season,"-",Team1,"-",Team2)) %>%
select(ID, pred)
womens_teams_total <- womens_teams %>% group_by(Season) %>% summarise(teams = n()) %>% pull(teams)
mens_teams_total <- mens_teams %>% group_by(Season) %>% summarise(teams = n()) %>% pull(teams)
sum(c(choose(womens_teams_total,2),choose(mens_teams_total,2)))
submission <- rbind(womens_submission, mens_submission)
files$SampleSubmission2023
diff <- setdiff(submission$ID, files$SampleSubmission2023$ID)
submission$ID
submission %>% head(n=5)
files$SampleSubmission2023 %>% filter(ID == "2017-3367-3195")
mens_teams_1 <- files$MRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, LTeamID) %>%
rename(TeamID = LTeamID)
mens_teams_2 <- files$MRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, WTeamID) %>%
rename(TeamID = WTeamID)
mens_teams <- merge(mens_teams_1, mens_teams_2, all = T)
mens_matchups <- data.frame()
for(i in unique(mens_teams$Season)){
curr_matchups <- expand.grid(mens_teams %>% filter(Season == i) %>% pull(TeamID),
mens_teams %>% filter(Season == i) %>% pull(TeamID))
mens_matchups <- rbind(mens_matchups, curr_matchups %>% mutate(season = i))
}
mens_matchups <- mens_matchups %>%
filter(Var1 < Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
mens_team_data <- mens_matchups %>%
merge(mens_ranking_data, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(Rank1 = OrdinalRank,
Conf1 = ConfAbbrev) %>%
merge(mens_ranking_data, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(Rank2 = OrdinalRank,
Conf2 = ConfAbbrev) %>%
merge(mens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
rank_diff = Rank1 - Rank2)
mens_team_data$predicted_point_diff <- predict(rank_model, mens_team_data, type = "response")
mens_team_data$pred <- pnorm(mens_team_data$predicted_point_diff, 0, point_sd)
mens_submission <- mens_team_data %>%
mutate(ID = paste0(season,"-",Team1,"-",Team2)) %>%
select(ID, pred)
## WOMENS
womens_teams_1 <- files$WRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, LTeamID) %>%
rename(TeamID = LTeamID)
womens_teams_2 <- files$WRegularSeasonCompactResults %>%
filter(Season %in% c(2017:2019,2021:2022)) %>%
distinct(Season, WTeamID) %>%
rename(TeamID = WTeamID)
womens_teams <- merge(womens_teams_1, womens_teams_2, all = T)
womens_matchups <- data.frame()
for(i in unique(womens_teams$Season)){
curr_matchups <- expand.grid(womens_teams %>% filter(Season == i) %>% pull(TeamID),
womens_teams %>% filter(Season == i) %>% pull(TeamID))
womens_matchups <- rbind(womens_matchups, curr_matchups %>% mutate(season = i))
}
womens_matchups <- womens_matchups %>%
filter(Var1 < Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
womens_team_data <- womens_matchups %>%
merge(womens_stats, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(win_perc_1 = win_perc,
margin_1 = avg_margin,
Conf1 = ConfAbbrev) %>%
merge(womens_stats, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(win_perc_2 = win_perc,
margin_2 = avg_margin,
Conf2 = ConfAbbrev) %>%
merge(womens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
win_perc_diff = win_perc_1 - win_perc_2,
margin_diff = margin_1 - margin_2)
womens_team_data$predicted_point_diff <- predict(womens_model, womens_team_data, type = "response")
womens_team_data$pred <- pnorm(womens_team_data$predicted_point_diff, 0, womens_point_sd)
womens_submission <- womens_team_data %>%
mutate(ID = paste0(season,"-",Team1,"-",Team2)) %>%
select(ID, pred)
submission <- rbind(womens_submission, mens_submission)
diff <- setdiff(submission$ID, files$SampleSubmission2023$ID)
submission %>% head)n=5
submission %>% head(n=5)
files$SampleSubmission2023 %>% filter(ID == "2017-3239-3316")
submission <- rbind(womens_submission, mens_submission) %>%
arrange(ID)
submission <- rbind(womens_submission, mens_submission) %>%
arrange(ID)
diff <- setdiff(submission$ID, files$SampleSubmission2023 %>% arrange(ID) %>% pull(ID))
head(submission$ID)
head(submission)
head(files$SampleSubmission2023 %>% arrange(ID) %>% pull(ID))
head(files$SampleSubmission2023 %>% arrange(ID))
head(submission)
mens_submission <- mens_team_data %>%
mutate(ID = paste0(season,"_",Team1,"_",Team2)) %>%
select(ID, pred)
womens_submission <- womens_team_data %>%
mutate(ID = paste0(season,"_",Team1,"_",Team2)) %>%
select(ID, pred)
submission <- rbind(womens_submission, mens_submission) %>%
arrange(ID)
diff <- setdiff(submission$ID, files$SampleSubmission2023 %>% arrange(ID) %>% pull(ID))
head(files$SampleSubmission2023 %>% arrange(ID))
head(submission)
614319-nrow(submission)
files$MTeams
mens_teams <- data.frame()
for(i in c(2017:2019,2021,2022)){
teams <- files$MTeams %>%
filter(i > FirstD1Season & i < LastD1Season) %>%
pull(TeamID)
mens_teams <- rbind(mens_teams, data.frame(Season = i,
TeamID = teams))
}
View(mens_teams)
womens_teams <- data.frame()
for(i in c(2017:2019,2021,2022)){
teams <- files$WTeams %>%
filter(i > FirstD1Season & i < LastD1Season) %>%
pull(TeamID)
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
files$WTeams
womens_teams <- data.frame()
for(i in c(2017:2019,2021,2022)){
teams <- files$WTeams %>%
pull(TeamID)
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
mens_teams <- data.frame()
for(i in c(2017:2019,2021,2022)){
teams <- files$MTeams %>%
filter(i > FirstD1Season & i < LastD1Season) %>%
pull(TeamID)
mens_teams <- rbind(mens_teams, data.frame(Season = i,
TeamID = teams))
}
mens_matchups <- data.frame()
for(i in unique(mens_teams$Season)){
curr_matchups <- expand.grid(mens_teams %>% filter(Season == i) %>% pull(TeamID),
mens_teams %>% filter(Season == i) %>% pull(TeamID))
mens_matchups <- rbind(mens_matchups, curr_matchups %>% mutate(season = i))
}
mens_matchups <- mens_matchups %>%
filter(Var1 < Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
mens_team_data <- mens_matchups %>%
merge(mens_ranking_data, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(Rank1 = OrdinalRank,
Conf1 = ConfAbbrev) %>%
merge(mens_ranking_data, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(Rank2 = OrdinalRank,
Conf2 = ConfAbbrev) %>%
merge(mens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
rank_diff = Rank1 - Rank2)
mens_team_data$predicted_point_diff <- predict(rank_model, mens_team_data, type = "response")
mens_team_data$pred <- pnorm(mens_team_data$predicted_point_diff, 0, point_sd)
mens_submission <- mens_team_data %>%
mutate(ID = paste0(season,"_",Team1,"_",Team2)) %>%
select(ID, pred)
## WOMENS
womens_teams <- data.frame()
for(i in c(2017:2019,2021,2022)){
teams <- files$WTeams %>%
pull(TeamID)
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
womens_matchups <- data.frame()
for(i in unique(womens_teams$Season)){
curr_matchups <- expand.grid(womens_teams %>% filter(Season == i) %>% pull(TeamID),
womens_teams %>% filter(Season == i) %>% pull(TeamID))
womens_matchups <- rbind(womens_matchups, curr_matchups %>% mutate(season = i))
}
womens_matchups <- womens_matchups %>%
filter(Var1 < Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
womens_team_data <- womens_matchups %>%
merge(womens_stats, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(win_perc_1 = win_perc,
margin_1 = avg_margin,
Conf1 = ConfAbbrev) %>%
merge(womens_stats, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(win_perc_2 = win_perc,
margin_2 = avg_margin,
Conf2 = ConfAbbrev) %>%
merge(womens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
win_perc_diff = win_perc_1 - win_perc_2,
margin_diff = margin_1 - margin_2)
womens_team_data$predicted_point_diff <- predict(womens_model, womens_team_data, type = "response")
womens_team_data$pred <- pnorm(womens_team_data$predicted_point_diff, 0, womens_point_sd)
womens_submission <- womens_team_data %>%
mutate(ID = paste0(season,"_",Team1,"_",Team2)) %>%
select(ID, pred)
submission <- rbind(womens_submission, mens_submission) %>%
arrange(ID)
mens_teams <- data.frame()
for(i in c(2017:2019,2021,2022)){
teams <- files$MTeams %>%
filter(i >= FirstD1Season & i <= LastD1Season) %>%
pull(TeamID)
mens_teams <- rbind(mens_teams, data.frame(Season = i,
TeamID = teams))
}
mens_matchups <- data.frame()
for(i in unique(mens_teams$Season)){
curr_matchups <- expand.grid(mens_teams %>% filter(Season == i) %>% pull(TeamID),
mens_teams %>% filter(Season == i) %>% pull(TeamID))
mens_matchups <- rbind(mens_matchups, curr_matchups %>% mutate(season = i))
}
mens_matchups <- mens_matchups %>%
filter(Var1 < Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
mens_team_data <- mens_matchups %>%
merge(mens_ranking_data, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(Rank1 = OrdinalRank,
Conf1 = ConfAbbrev) %>%
merge(mens_ranking_data, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(Rank2 = OrdinalRank,
Conf2 = ConfAbbrev) %>%
merge(mens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
rank_diff = Rank1 - Rank2)
mens_team_data$predicted_point_diff <- predict(rank_model, mens_team_data, type = "response")
mens_team_data$pred <- pnorm(mens_team_data$predicted_point_diff, 0, point_sd)
mens_submission <- mens_team_data %>%
mutate(ID = paste0(season,"_",Team1,"_",Team2)) %>%
select(ID, pred)
## WOMENS
womens_teams <- data.frame()
for(i in c(2017:2019,2021,2022)){
teams <- files$WTeams %>%
pull(TeamID)
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
womens_matchups <- data.frame()
for(i in unique(womens_teams$Season)){
curr_matchups <- expand.grid(womens_teams %>% filter(Season == i) %>% pull(TeamID),
womens_teams %>% filter(Season == i) %>% pull(TeamID))
womens_matchups <- rbind(womens_matchups, curr_matchups %>% mutate(season = i))
}
womens_matchups <- womens_matchups %>%
filter(Var1 < Var2) %>%
rename(Team1 = Var1,
Team2 = Var2)
womens_team_data <- womens_matchups %>%
merge(womens_stats, by.x = c("season","Team1"), by.y = c("Season","TeamID")) %>%
rename(win_perc_1 = win_perc,
margin_1 = avg_margin,
Conf1 = ConfAbbrev) %>%
merge(womens_stats, by.x = c("season","Team2"), by.y = c("Season","TeamID")) %>%
rename(win_perc_2 = win_perc,
margin_2 = avg_margin,
Conf2 = ConfAbbrev) %>%
merge(womens_conf_stats, by.x = c("season","Conf1","Conf2"), by.y = c("Season","ConfAbbrev","opp_ConfAbbrev"), all = T) %>%
filter(season %in% c(2017, 2018, 2019, 2021, 2022)) %>%
mutate(conf_ppg_diff = ifelse(is.na(conf_ppg_diff), 0, conf_ppg_diff),
win_perc_diff = win_perc_1 - win_perc_2,
margin_diff = margin_1 - margin_2)
womens_team_data$predicted_point_diff <- predict(womens_model, womens_team_data, type = "response")
womens_team_data$pred <- pnorm(womens_team_data$predicted_point_diff, 0, womens_point_sd)
womens_submission <- womens_team_data %>%
mutate(ID = paste0(season,"_",Team1,"_",Team2)) %>%
select(ID, pred)
submission <- rbind(womens_submission, mens_submission) %>%
arrange(ID)
mens_teams <- data.frame()
for(i in c(2017:2019,2021:2022)){
teams <- files$MTeams %>%
filter(i >= FirstD1Season & i <= LastD1Season) %>%
pull(TeamID)
mens_teams <- rbind(mens_teams, data.frame(Season = i,
TeamID = teams))
}
womens_teams <- data.frame()
for(i in c(2017:2019,2021:2022)){
teams <- files$MTeams %>%
filter(i >= FirstD1Season & i <= LastD1Season) %>%
pull(TeamID)
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
total_teams <- rbind(mens_teams %>% mutate(gender = "M"),
womens_teams %>% mutate(gender = "W"))
library(tidyverse)
total_teams <- rbind(mens_teams %>% mutate(gender = "M"),
womens_teams %>% mutate(gender = "W")) %>%
group_by(Season) %>%
summarise(teams = n())
View(total_teams)
total_teams <- rbind(mens_teams %>% mutate(gender = "M"),
womens_teams %>% mutate(gender = "W")) %>%
group_by(Season, gender) %>%
summarise(teams = n())
womens_teams <- data.frame()
for(i in c(2017:2019,2021:2022)){
teams <- files$WTeams
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
total_teams <- rbind(mens_teams %>% mutate(gender = "M"),
womens_teams %>% mutate(gender = "W")) %>%
group_by(Season, gender) %>%
summarise(teams = n())
mens_teams <- data.frame()
for(i in c(2017:2019,2021:2022)){
teams <- files$MTeams %>%
filter(i >= FirstD1Season & i <= LastD1Season) %>%
pull(TeamID)
mens_teams <- rbind(mens_teams, data.frame(Season = i,
TeamID = teams))
}
womens_teams <- data.frame()
for(i in c(2017:2019,2021:2022)){
teams <- files$WTeams
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
total_teams <- rbind(mens_teams %>% mutate(gender = "M"),
womens_teams %>% mutate(gender = "W")) %>%
group_by(Season, gender) %>%
summarise(teams = n())
mens_teams
womens_teams
womens_teams <- data.frame()
for(i in c(2017:2019,2021:2022)){
teams <- files$WTeams %>% pull(TeamID)
womens_teams <- rbind(womens_teams, data.frame(Season = i,
TeamID = teams))
}
total_teams <- rbind(mens_teams %>% mutate(gender = "M"),
womens_teams %>% mutate(gender = "W")) %>%
group_by(Season, gender) %>%
summarise(teams = n())
View(total_teams)
sum(choose(total_teams$teams,2))
choose(total_teams$teams,2)
files$WTeams
